<!DOCTYPE html>
<!-- saved from url=(0049)file:///C:/Users/0/Downloads/sqlite_homework.html -->
<html lang="ru"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>Домашнее задание по SQLite</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; }
        h1 { color: #333; }
        h2 { color: #444; margin-top: 30px; }
        table { border-collapse: collapse; width: 100%; margin-top: 10px; margin-bottom: 20px; }
        th, td { border: 1px solid #aaa; padding: 8px; text-align: left; }
        th { background: #f0f0f0; }
        .task { background: #fafafa; border: 1px solid #ccc; padding: 10px; margin: 15px 0; }
        code { background: #f6f8fa; padding: 2px 4px; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>Домашнее задание: Создание базы данных и SQL-запросы</h1>
    <p>
        Цель: закрепить работу с SQLite и модулем <code>sqlite3</code> в Python.
        Создайте новую базу данных, спроектируйте таблицы, заполните их указанными ниже начальными данными (ровно как задано) и напишите SQL-запросы по заданию.
    </p>

    <h2>Тема базы данных: Кинотеатр</h2>
    <p>База хранит информацию о фильмах, залах, сеансах и билетах.</p>

    <h2>Структура базы данных</h2>
    <h3>1. Таблица <code>movies</code></h3>
    <ul>
        <li><strong>id</strong> — целое число, первичный ключ</li>
        <li><strong>title</strong> — текст, название фильма</li>
        <li><strong>genre</strong> — текст, жанр фильма</li>
        <li><strong>duration</strong> — целое число, длительность фильма (минуты)</li>
    </ul>

    <h3>2. Таблица <code>halls</code></h3>
    <ul>
        <li><strong>id</strong> — целое число, первичный ключ</li>
        <li><strong>name</strong> — текст, название зала</li>
        <li><strong>capacity</strong> — целое число, количество мест</li>
    </ul>

    <h3>3. Таблица <code>sessions</code></h3>
    <ul>
        <li><strong>id</strong> — целое число, первичный ключ</li>
        <li><strong>movie_id</strong> — внешний ключ на <code>movies.id</code></li>
        <li><strong>hall_id</strong> — внешний ключ на <code>halls.id</code></li>
        <li><strong>start_time</strong> — текст (дата и время, формат YYYY-MM-DD HH:MM)</li>
    </ul>

    <h3>4. Таблица <code>tickets</code></h3>
    <ul>
        <li><strong>id</strong> — целое число, первичный ключ</li>
        <li><strong>session_id</strong> — внешний ключ на <code>sessions.id</code></li>
        <li><strong>buyer_name</strong> — текст, имя покупателя</li>
        <li><strong>price</strong> — целое число, цена билета</li>
    </ul>

    <h2>Данные для заполнения (10 записей в каждую таблицу)</h2>

    <h3>Таблица <code>movies</code></h3>
    <table>
        <thead><tr><th>id</th><th>title</th><th>genre</th><th>duration</th></tr></thead>
        <tbody>
            <tr><td>1</td><td>Интерстеллар</td><td>фантастика</td><td>169</td></tr>
            <tr><td>2</td><td>Начало</td><td>боевик</td><td>148</td></tr>
            <tr><td>3</td><td>Матрица</td><td>фантастика</td><td>136</td></tr>
            <tr><td>4</td><td>Джокер</td><td>драма</td><td>122</td></tr>
            <tr><td>5</td><td>Паразиты</td><td>триллер</td><td>132</td></tr>
            <tr><td>6</td><td>Зелёная книга</td><td>драма</td><td>130</td></tr>
            <tr><td>7</td><td>Безумный Макс: Дорога ярости</td><td>боевик</td><td>120</td></tr>
            <tr><td>8</td><td>Гран Торино</td><td>драма</td><td>116</td></tr>
            <tr><td>9</td><td>Дюна</td><td>фантастика</td><td>155</td></tr>
            <tr><td>10</td><td>Варкрафт</td><td>фэнтези</td><td>123</td></tr>
        </tbody>
    </table>

    <h3>Таблица <code>halls</code></h3>
    <table>
        <thead><tr><th>id</th><th>name</th><th>capacity</th></tr></thead>
        <tbody>
            <tr><td>1</td><td>Зал 1</td><td>100</td></tr>
            <tr><td>2</td><td>Зал 2</td><td>80</td></tr>
            <tr><td>3</td><td>Зал 3</td><td>50</td></tr>
            <tr><td>4</td><td>Зал 4</td><td>120</td></tr>
            <tr><td>5</td><td>Зал 5</td><td>60</td></tr>
            <tr><td>6</td><td>Зал 6</td><td>90</td></tr>
            <tr><td>7</td><td>VIP 1</td><td>30</td></tr>
            <tr><td>8</td><td>VIP 2</td><td>25</td></tr>
            <tr><td>9</td><td>IMAX</td><td>200</td></tr>
            <tr><td>10</td><td>4DX</td><td>110</td></tr>
        </tbody>
    </table>

    <h3>Таблица <code>sessions</code></h3>
    <table>
        <thead><tr><th>id</th><th>movie_id</th><th>hall_id</th><th>start_time</th></tr></thead>
        <tbody>
            <tr><td>1</td><td>1</td><td>1</td><td>2025-09-01 18:00</td></tr>
            <tr><td>2</td><td>2</td><td>2</td><td>2025-09-01 20:00</td></tr>
            <tr><td>3</td><td>3</td><td>3</td><td>2025-09-02 19:00</td></tr>
            <tr><td>4</td><td>4</td><td>4</td><td>2025-09-02 21:30</td></tr>
            <tr><td>5</td><td>5</td><td>5</td><td>2025-09-03 18:15</td></tr>
            <tr><td>6</td><td>6</td><td>6</td><td>2025-09-03 19:00</td></tr>
            <tr><td>7</td><td>7</td><td>7</td><td>2025-09-03 21:00</td></tr>
            <tr><td>8</td><td>8</td><td>8</td><td>2025-09-04 17:45</td></tr>
            <tr><td>9</td><td>9</td><td>9</td><td>2025-09-04 20:10</td></tr>
            <tr><td>10</td><td>10</td><td>10</td><td>2025-09-05 19:40</td></tr>
        </tbody>
    </table>

    <h3>Таблица <code>tickets</code></h3>
    <table>
        <thead><tr><th>id</th><th>session_id</th><th>buyer_name</th><th>price</th></tr></thead>
        <tbody>
            <tr><td>1</td><td>1</td><td>Иванов Иван</td><td>500</td></tr>
            <tr><td>2</td><td>2</td><td>Петров Пётр</td><td>450</td></tr>
            <tr><td>3</td><td>3</td><td>Сидоров Сидор</td><td>500</td></tr>
            <tr><td>4</td><td>4</td><td>Смирнова Мария</td><td>400</td></tr>
            <tr><td>5</td><td>5</td><td>Петрова Анна</td><td>550</td></tr>
            <tr><td>6</td><td>6</td><td>Кузнецов Алексей</td><td>480</td></tr>
            <tr><td>7</td><td>7</td><td>Васильева Ольга</td><td>600</td></tr>
            <tr><td>8</td><td>8</td><td>Орлов Дмитрий</td><td>420</td></tr>
            <tr><td>9</td><td>9</td><td>Миронова Екатерина</td><td>650</td></tr>
            <tr><td>10</td><td>10</td><td>Соколов Андрей</td><td>700</td></tr>
        </tbody>
    </table>

    <h2>Задания</h2>
    <div class="task">
        <h3>Задача 1. Выборка с объединением таблиц</h3>
        <p>
            Составьте запрос, который выведет список всех проданных билетов с указанием названия фильма, зала и имени покупателя.
            Подсказка: используйте <strong>JOIN</strong> для объединения <code>tickets</code>, <code>sessions</code>, <code>movies</code> и <code>halls</code>.
        </p>
    </div>

    <div class="task">
        <h3>Задача 2. Группировка данных</h3>
        <p>
            Составьте запрос, который посчитает количество проданных билетов по каждому фильму.
            Подсказка: используйте <strong>GROUP BY</strong> по названию фильма.
        </p>
    </div>

    <div class="task">
        <h3>Задача 3. Суммирование значений</h3>
        <p>
            Составьте запрос, который посчитает суммарную выручку по всем билетам.
            Подсказка: используйте <strong>SUM()</strong> по колонке <code>price</code>.
        </p>
    </div>

    <h2>Что сдать</h2>
    <ul>
        <li>Файл базы данных SQLite (<code>.db</code>), созданный вами.</li>
        <li>Код Python, который создаёт таблицы и вставляет данные (используя <code>sqlite3</code>).</li>
        <li>SQL-запросы для всех трёх задач (как отдельный файл или прямо в коде Python).</li>
    </ul>

</body></html>